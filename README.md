# PIC16f1938-RBKN-TapeLED-Sending
pic16f1938を用いてI2C通信でテープLED(ws2812b)を最大8本制御する為のソフトウェアです。
PIC16f1938-RBKN-TapeLED-Com を別picで同時に使用します。

## 実際の動作
stm32f_systemから制御することで以下のような動作が可能となります。
https://github.com/UnknownSP/PIC16f1938-RBKN-TapeLED-Sending/assets/39638661/325ef8eb-ca5a-4cdb-b3d8-aeb81f05cd2a

## 制御方式
8本LEDを制御するので、3本のデータセレクト信号線、8本のデータ送信線、クロック線を用いてPIC間での通信をおこなっています。

I2C通信側のPICがデータを受け取り、一旦配列へ格納します。
LED制御側のPICがクロック信号をI2C通信側のPICへ送り、その度に、3本のデータセレクト信号線でデータを書き換えるLEDを選択し、8本のデータ送信線で1byteのデータ通信をします。
通信終了後、I2C通信側のPICは次のデータを送信する準備(データ送信配列の切り替え)を行います。

## その他
テープLEDを制御する際には、データ信号の切り替えタイミングがとても重要となっています。その為、I2C通信の割り込みが入った際に不具合が起きてしまうので、I2C通信を行うPICとテープLEDを制御するPICを分けました。また、PIC間の通信をパラレル方式のようにすることで、タイミングのずれることのないような制御を可能としました。
